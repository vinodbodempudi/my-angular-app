"use strict";var app=angular.module("fatHomesApp",["ngRoute","registerProperty","home","login","imageupload","nya.bootstrap.select","ui.bootstrap","properties"]);app.constant("servicesBaseUrl","http://localhost:3000"),app.config(["$routeProvider","$httpProvider",function(a,b){a.when("/propertyresults/:city/:locality",{templateUrl:"modules/propertyresults/html/property-results.html",controller:"PropertyResultsCtrl"}).when("/properties/:city/:locality",{templateUrl:"modules/properties/html/properties.html",controller:"PropertiesCtrl",reloadOnSearch:!1}).when("/properties/:city/:locality/:propertyId",{templateUrl:"modules/properties/html/properties.html",controller:"PropertiesCtrl",reloadOnSearch:!1}).when("/registerproperty/:city/:locality",{templateUrl:"modules/registerproperty/html/register-property.html",controller:"RegisterPropertyCtrl"}).when("/home",{templateUrl:"modules/home/html/home.html",controller:"HomeCtrl"}).when("/browser",{templateUrl:"shared/html/browser.html"}).otherwise({redirectTo:"/home"}),b.defaults.cache=!1}]),app.run(["$route","$rootScope","$location",function(a,b,c){var d=c.path;c.path=function(e,f){if(f===!1)var g=a.current,h=b.$on("$locationChangeSuccess",function(){a.current=g,h()});return d.apply(c,[e])}}]),app.run(["$rootScope","$location","$window",function(a,b){if(a.showTabs={},a.$on("$locationChangeSuccess",function(){a.$broadcast("locationChangeSuccess",b.path())}),null!=b.path().match("properties")||null!=b.path().match("registerproperty"))return a.showTabs={},void(a.showTabs.showTabs=!0);if(!b.path()||null!=b.path().match("home")){var c=localStorage.getItem("city"),d=localStorage.getItem("locality");c&&d&&(b.path("/properties/"+c+"/"+d),a.showTabs={},a.showTabs.showTabs=!0)}}]),app.directive("match",function(){return{require:"ngModel",restrict:"A",scope:{match:"="},link:function(a,b,c,d){a.$watch(function(){return d.$pristine&&angular.isUndefined(d.$modelValue)||a.match===d.$modelValue},function(a){d.$setValidity("match",a)})}}}),app.directive("selectpicker",["$timeout",function(a){return{restrict:"A",link:function(b,c){var d=function(){c.selectpicker()};a(d,0,!1)}}}]),app.service("LocationService",["$http","servicesBaseUrl",function(a,b){a.defaults.useXDomain=!0,this.getCities=function(){return a.get(b+"/cities")},this.getLocalities=function(c){return a.get(b+"/localities/"+c)}}]),app.controller("fatHomeController",["$scope","$rootScope","$location","LoginService","LocationService","fatHomeUtilService",function(a,b,c,d,e,f){b.fatHome={},b.user={},"undefined"!=typeof Storage&&b.$watch("user",function(a){a.city&&localStorage.setItem("city",a.city),a.locality&&localStorage.setItem("locality",a.locality)},!0),a.showLoginModal=function(){return b.isUserLoggedin?(b.userDetails=null,b.isUserLoggedin=!1,void(a.loginLabel="Sign In")):(a.showLoginmodal=!0,void(a.showRegistermodal=!1))},a.showRegisterModal=function(){a.showLoginmodal=!1,a.showRegistermodal=!0,a.cities||a.getCities()},a.getCities=function(){e.getCities().success(function(b){a.cities=b}).error(function(){})},a.getLocalities=function(b){e.getLocalities(b).success(function(b){a.localities=b}).error(function(){})},a.login=function(c){d.authenticate(c).success(function(c){b.userDetails=c,b.isUserLoggedin=!0,a.loginLabel="Sign Out",a.loginUser={},a.showLoginmodal=!1}).error(function(){})},a.register=function(c){d.register(c).success(function(c){b.userDetails=c,b.isUserLoggedin=!0,a.loginLabel="Sign Out",a.loginUser={},a.showRegistermodal=!1}).error(function(){})},a.sendFeedback=function(b){a.feedbackform.submitted=!0,a.feedbackform.$valid&&(b.city=a.user.city,b.locality=a.user.locality,b.user=a.userDetails,f.sendFeedback(b).success(function(){a.showFeedbackmodal=!1,a.feedback={},a.feedbackform.submitted=!1}).error(function(){}))}}]),app.service("LoginService",["$http",function(a){this.authenticate=function(b){return a.get("data/cities.json",b)},this.register=function(b){return a.get("data/cities.json",b)}}]),app.service("fatHomeUtilService",["$http","servicesBaseUrl",function(a,b){this.sendFeedback=function(c){return a.post(b+"/feedback",c)}}]),app.directive("modalShow",function(){return{restrict:"A",scope:{modalVisible:"="},link:function(a,b,c){a.showModal=function(a){a?b.modal("show"):(b.modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove())},c.modalVisible?(a.$watch("modalVisible",function(b){a.showModal(b)}),b.bind("hide.bs.modal",function(){a.modalVisible=!1,a.$$phase||a.$root.$$phase||a.$apply()})):a.showModal(!0)}}}),app.filter("ordinal",function(){return function(a){return a?a.charAt(0).toUpperCase()+a.substr(1).replace(/[A-Z]/g," $&"):""}}),app.directive("pleaseWait",["$rootScope","SHOW_PROGRESS_BAR","HIDE_PROGRESS_BAR",function(a,b,c){var d=function(){var a=document,b=0;return b=Math.max(a.documentElement.scrollHeight,Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))};return{restrict:"EA",replace:!0,templateUrl:"shared/html/please-wait.html",link:function(e,f){f.hide(),a.$on(b,function(){f.show(),f.css("height",d())}),a.$on(c,function(){f.hide()})}}}]),app.constant("SHOW_PROGRESS_BAR","SHOW_PROGRESS_BAR"),app.constant("HIDE_PROGRESS_BAR","HIDE_PROGRESS_BAR"),app.config(["$httpProvider","SHOW_PROGRESS_BAR","HIDE_PROGRESS_BAR",function(a,b,c){a.defaults.cache=!1,a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"];var d,e=["$q","$injector",function(a,b){function e(a){return d=d||b.get("$http"),d.pendingRequests.length<1&&(g=g||b.get("$rootScope"),g.$broadcast(c)),a}function f(e){d=d||b.get("$http"),d.pendingRequests.length<1&&(g=g||b.get("$rootScope"),g.$broadcast(c));({title:"Service Exception",data:e.data});return alert("Service Exception : "+e.data),a.reject(e)}var g;return function(a){return g=g||b.get("$rootScope"),a.then(e,f)}}];a.responseInterceptors.push(e)}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance","data",function(a,b,c){a.data=c,a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}]);
"use strict";angular.module("home",[]).controller("HomeCtrl",["$scope","LocationService","$location","$rootScope",function(a,b,c,d){a.backgroundImages=["images/a1.jpg","images/a2.jpg","images/a3.jpg"],a.showProperties=function(b,e){a.form1.submitted=!0,a.form1.$valid&&(d.user.city=b,d.user.locality=e,c.path("/properties/"+b+"/"+e),d.showTabs.showTabs=!0)},b.getCities().success(function(b){a.cities=b,a.fatHome.cities=b}).error(function(){}),a.getLocalities=function(c){return c?void b.getLocalities(c).success(function(b){a.localities=b,a.fatHome.localities=b}).error(function(){}):void(a.localities=[])}}]).service("HomeService",["$http",function(){}]).service("FatHomeUtil",function(){this.getLocationDetails=function(a,b){for(var c=0;c<a.length;c++)if(a[c].locality===b)return a[c];return{}},this.propertySortOptions=function(){return[{lable:"Date",dataField:"createdDate",reverseOrder:!0},{lable:"Price(low to high)",dataField:"price",reverseOrder:!1},{lable:"Price(high to low)",dataField:"price",reverseOrder:!0},{lable:"Sqft(low to high)",dataField:"size",reverseOrder:!1},{lable:"Sqft(high to low)",dataField:"size",reverseOrder:!0}]},this.unitOptions=function(){return[{label:"Sq. Feet",sqftMultiplier:1},{label:"Sq. Meter",sqftMultiplier:10.7639},{label:"Sq. Yards",sqftMultiplier:9},{label:"Aankadam",sqftMultiplier:72},{label:"Acres",sqftMultiplier:43560},{label:"Ares",sqftMultiplier:1076},{label:"Bigha I",sqftMultiplier:17424},{label:"Bigha II",sqftMultiplier:27225},{label:"Biswa I",sqftMultiplier:348480},{label:"Biswa II",sqftMultiplier:544500},{label:"Cents",sqftMultiplier:435.54},{label:"Chataks",sqftMultiplier:450},{label:"Guntha",sqftMultiplier:1089},{label:"Grounds",sqftMultiplier:2400},{label:"Hectares",sqftMultiplier:107639},{label:"Kanal",sqftMultiplier:108e3},{label:"Kottah (B)",sqftMultiplier:720},{label:"Marla",sqftMultiplier:5400},{label:"Perch",sqftMultiplier:272},{label:"Rood",sqftMultiplier:10890}]},this.getSqftMutiplier=function(a){var b,c=this.unitOptions();for(b=0;b<c.length;b++)if(c[b].label===a)return c[b].sqftMultiplier;return 0},this.getDropDownValues=function(a){for(var b=[],c=0;a>=c;c++)b[c]=10>c?"0"+c:""+c;return b},this.hoursDropDownValues=function(){return this.getDropDownValues(23)},this.noOfUnitsDropDownValues=function(){for(var a=[],b=1;30>=b;b++)a[b]=10>b?"0"+b:""+b;return a},this.bedRoomsDropDownValues=function(){for(var a=[],b=0;9>=b;b++)a[b]=""+b;return a},this.bathRoomsDropDownValues=function(){for(var a=[],b=0;9>=b;b++)a[b]=""+b;return a},this.flooringDropDownValues=function(){return["Marble","Normal Tiles","Vitrified Tiles","Wooden","Ceramic","Mosaic Tiles","Granite","Spartex Tiles","Marbonite","Stone","IPSFinish","Cement","Vinyl","Other"]},this.propertyTypes=function(){return["Residential"]},this.propertySubTypeMapper=function(){return{Residential:["Apartment","Individual House/Villa","Builder Floor","Pent House","Farm House","Service Apartment","Studio Apartment"],Commercial:["Office space/complex","Office in IT Park/SEZ","Commercial shops/showrooms","Shopping mall Space","Showrooms","Business Center","Commercial land/plots","Warehouse/Godown","Banquet Hall/Guest House","Hotel/Restaurant","Institutional land","Clinic/Hospital Building","Hotel Sites","Industrial Land/Plots","Industrial Building","Industrial Shed","Agricultural Land"]}},this.balconiesDropDownValues=function(){for(var a=[],b=1;9>=b;b++)a[b]=b;return a},this.ageOfPropertyOptions=function(){for(var a=[],b=[],c=0;30>=c;c++)a[c]=10>c?"0"+c:c;for(var c=0;11>=c;c++)b[c]=10>c?"0"+c:c;return{years:a,months:b}},this.convertToCamelCase=function(a){return a?a.charAt(0).toUpperCase()+a.substring(1):""},this.currencyFormater=function(a){if(!a)return"";var b=a.toString(),c=b.indexOf(".");c>-1&&(b=str.substring(0,c));var d=b.substring(b.length-3),e=b.substring(0,b.length-3);return""!=e&&(d=","+d),e.replace(/\B(?=(\d{2})+(?!\d))/g,",")+d}});
"use strict";angular.module("login",[]).controller("LoginCtrl",["$scope",function(){}]);
"use strict";angular.module("properties",[]).controller("PropertiesCtrl",["$scope","$routeParams","PropertiesService","FatHomeUtil","LocationService","$location","$rootScope",function(a,b,c,d,e,f){a.user.city=a.city=a.newCity=b.city,a.user.locality=a.locality=a.newLocality=b.locality,a.properties=[],a.sortOptions=d.propertySortOptions(),a.bedRoomsDropDownValues=d.bedRoomsDropDownValues(),a.propertyTypes=d.propertyTypes(),a.propertySubTypeMapper=d.propertySubTypeMapper(),a.unitOptions=d.unitOptions(),a.predicate={},a.search={},a.slides=[],a.addImages=["images/a1_old.jpg","images/a2.jpg","images/a3.jpg"],a.$on("locationChangeSuccess",function(b,c){if(c&&c.match("properties")){var d=c.split("/");if(d.length>4)return a.showPage="propertyDetails",void a.getPropertyDetails(d[4]);a.showPage="propertyResults"}}),a.fatHome.cities||e.getCities().success(function(b){a.fatHome.cities=b,a.getLocalities(a.city)}).error(function(){}),a.$watch("search",function(){a.showPage="propertyResults"},!0),a.$watch("propertyDetails",function(a){a&&h()},!0),a.openChangeLocationModal=function(){a.newCity=a.city,a.newLocality=a.locality,a.form1.submitted=!1,a.showChangeLocationModal=!0},a.showProperties=function(b,c){a.user.city=a.city=b,a.user.locality=a.locality=c,a.showChangeLocationModal=!1,f.path("/properties/"+b+"/"+c,!1),a.getProperties(b,c),a.populateCurrentLocationDetails()},a.getLocalities=function(b){return b?void e.getLocalities(b).success(function(b){a.fatHome.localities=b,a.populateCurrentLocationDetails()}).error(function(){}):void(a.localities=[])},a.populateCurrentLocationDetails=function(){a.currentLocationDetails&&a.currentLocationDetails.city===a.city&&a.currentLocationDetails.locality===a.locality||(a.currentLocationDetails=d.getLocationDetails(a.fatHome.localities,a.locality))},a.fatHome.localities&&a.populateCurrentLocationDetails();({city:b.city,locality:b.locality});a.getProperties=function(b,d){c.getProperties(b,d).success(function(b){a.showPage="propertyResults",a.properties=b,a.predicate=a.sortOptions[0]}).error(function(){})},a.isGetPropertyDetailsServiceInProgress=!1,a.getPropertyDetails=function(b){a.isGetPropertyDetailsServiceInProgress||(a.isGetPropertyDetailsServiceInProgress=!0,c.getPropertyDetails(b).success(function(b){a.isGetPropertyDetailsServiceInProgress=!1,a.showPage="propertyDetails",a.property=b,i(b),g(),a.propertyDetails.showPhotosTab&&h()}).error(function(){a.isGetPropertyDetailsServiceInProgress=!1}))};var g=function(){a.propertyDetails?a.propertyDetails.showDetailsTab||a.propertyDetails.showSpecificationsTab||a.propertyDetails.showAmenitiesTab||a.propertyDetails.showPhotosTab||a.propertyDetails.showContactTab||(a.propertyDetails.showDetailsTab=!0):a.propertyDetails={showDetailsTab:!0,showSpecificationsTab:!1,showAmenitiesTab:!1,showPhotosTab:!1,showContactTab:!1}},h=function(){a.property.urls&&a.property.urls.propertyUrls&&a.property.urls.propertyUrls.length>0&&a.slides!==a.property.urls.propertyUrls?(a.slides=[],angular.forEach(a.property.urls.propertyUrls,function(b){b&&a.slides.push(b)})):a.slides=[]},i=function(b){a.builtUp={},a.plotOrLand={},a.carpet={},b.details.area.builtUp&&(a.builtUp.builtUpArea=b.details.area.builtUp.builtUp,a.builtUp.builtUpUnits=b.details.area.builtUp.units),b.details.area.plotOrLand&&(a.plotOrLand.plotOrLandArea=b.details.area.plotOrLand.plotOrLand,a.plotOrLand.plotOrLandUnits=b.details.area.plotOrLand.units),b.details.area.carpet&&(a.carpet.carpetArea=b.details.area.carpet.carpet,a.carpet.carpetUnits=b.details.area.carpet.units)};a.covert=function(a,b){return(Number(b)/d.getSqftMutiplier(a)).toFixed(4)},a.showPropertyDetails=function(b){f.path("/properties/"+a.city+"/"+a.locality+"/"+b,!1),a.getPropertyDetails(b)},a.showPropertyResults=function(){return f.path("/properties/"+a.city+"/"+a.locality,!1),a.property=null,a.properties&&a.properties.length>0?void(a.showPage="propertyResults"):void a.getProperties(a.city,a.locality)};var j=function(){a.user.city=a.city=a.newCity=b.city,a.user.locality=a.locality=a.newLocality=b.locality;var c=b.propertyId;return c?void a.getPropertyDetails(c):void a.getProperties(a.city,a.locality)};j()}]).service("PropertiesService",["$http","servicesBaseUrl",function(a,b){this.getProperties=function(c,d){return a.get(b+"/properties/"+c+"/"+d)},this.getPropertyDetails=function(c){return a.get(b+"/properties/"+c)}}]).filter("filterPropertiesResults",[function(){return function(a,b){if(angular.isUndefined(a)||angular.isUndefined(b))return a;for(var c,d,e=[],f=0;f<a.length;f++)c=a[f],b.propertType&&b.propertType!==c.details.propertySubType||b.beds&&Number(b.beds)!==Number(c.details.bedRooms)||b.minPrice&&(d="Sell"===c.details.mode?c.details.price.price:c.details.monthlyRent,Number(b.minPrice)>Number(d))||b.maxPrice&&(d="Sell"===c.details.mode?c.details.price.price:c.details.monthlyRent,Number(b.maxPrice)<Number(d))||(b.buy||"Sell"!==c.details.mode)&&(b.rent||"Rent"!==c.details.mode)&&(b.minSft&&Number(b.minSft)>Number(c.details.area.builtUp.builtUpInSqft)||b.maxSft&&Number(b.maxSft)<Number(c.details.area.builtUp.builtUpInSqft)||e.push(c));return e}}]).filter("sortPropertyResults",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){d.push(a)}),d.sort(function(a,c){var d,e;return"price"===b&&(d="Sell"===a.details.mode?a.details.price.price:a.details.monthlyRent,e="Sell"===c.details.mode?c.details.price.price:c.details.monthlyRent),"size"===b&&(d=a.details.area.builtUp.builtUpInSqft,e=c.details.area.builtUp.builtUpInSqft),"createdDate"===b?(d=a[b],e=c[b],d>e?1:-1):Number(d)>Number(e)?1:-1}),c&&d.reverse(),d}}).filter("currencyFormatter",["FatHomeUtil",function(a){return a.currencyFormater}]).directive("propertyResults",function(){return{replace:!0,scope:!1,restrict:"EA",templateUrl:"modules/properties/html/property-results.html"}}).directive("propertyDetails",function(){return{replace:!0,restrict:"EA",templateUrl:"modules/properties/html/property-details.html"}}).directive("checkbox",function(){return{restrict:"EA",link:function(a,b){b.each(function(){$(this).wrap("<span class='custom-checkbox'></span>"),$(this).is(":checked")&&$(this).parent().addClass("selected")}),b.click(function(){$(this).parent().toggleClass("selected")})}}}).directive("map",["FatHomeUtil",function(a){function b(b){var c;this.markers=[],this.propertyMarkerMap={},this.addMarker=function(e,f,g){var h=new google.maps.Marker({position:new google.maps.LatLng(e.location.lat,e.location.lng),map:b,icon:"https://mts.googleapis.com/vt/icon/name=icons/spotlight/spotlight-poi.png&scale=0.70"}),i=function(a){return"Sell"===a.details.mode?a.details.price.price:a.details.monthlyRent},j=new google.maps.InfoWindow({content:"Title : "+e.details.title+"<br>Bedrooms : "+e.details.bedRooms+"<br>Area : "+e.details.area.builtUp.builtUp+" "+e.details.area.builtUp.units+"<br>Price : <label class='fa fa-rupee'> "+a.currencyFormater(i(e))+"</label>",maxWidth:250});google.maps.event.addListener(h,"mouseover",function(){j.open(b,h)}),google.maps.event.addListener(h,"mouseout",function(){j&&j.close()}),google.maps.event.addListener(h,"click",function(){return h===c?(f(),c.setIcon("https://mts.googleapis.com/vt/icon/name=icons/spotlight/spotlight-poi.png&scale=0.70"),void(c=null)):(d(h),void g(e._id))}),this.markers.push(h),this.propertyMarkerMap[e._id]=h},this.clearMarkers=function(){this.setAllMap(null)},this.setAllMap=function(a){for(var b=0;b<this.markers.length;b++)this.markers[b].setMap(a)},this.setPropertyMarkerAsSelected=function(a){d(this.propertyMarkerMap[a._id])},this.resetMarkerSelection=function(){c&&c.setIcon("https://mts.googleapis.com/vt/icon/name=icons/spotlight/spotlight-poi.png&scale=0.70")};var d=function(a){a&&(c&&c.setIcon("https://mts.googleapis.com/vt/icon/name=icons/spotlight/spotlight-poi.png&scale=0.70"),a.setIcon("../images/green-marker.png"),c=a)}}return{restrict:"EA",link:function(a,c){var d,e,f,g=function(a){var e={zoom:15,center:new google.maps.LatLng(a.lat,a.long),mapTypeId:google.maps.MapTypeId.ROADMAP},f=new google.maps.Map(c[0],e);d=new b(f)},h=function(b){d&&d.clearMarkers();for(var c=0;c<b.length;c++){var e=b[c];e.location&&d.addMarker(e,a.showPropertyResults,a.showPropertyDetails)}},i=function(a){e=a,d&&h(a)},j=function(a){f=a,a&&d&&(e&&0!=e.length||(e=[a],i(e)),d&&d.setPropertyMarkerAsSelected(f))};a.$watch("filteredProperties",i,!0),a.$watch("property",j,!0),a.$watch("showPage",function(a){"propertyResults"===a&&d&&d.resetMarkerSelection()}),a.$watch("currentLocationDetails",function(a){a&&(g(a),e&&i(e),f&&j(f))},!0)}}}]).directive("scroll",function(){var a;return{restrict:"EA",link:function(b,c){c.scroll(function(){a=c.scrollTop()}),b.$watch("showPage",function(b){"propertyResults"===b&&c.scrollTop(a)}),b.$watch("predicate",function(){c.scrollTop(0)},!0),b.$watch("search",function(){c.scrollTop(0)},!0)}}});
"use strict";angular.module("propertyDetails",[]).controller("PropertyDetailsCtrl",["$scope","LocationService","$routeParams","PropertyDetailsService",function(a,b,c,d){a.user.city=a.city=c.city,a.user.locality=a.locality=c.locality,a.fatHome.cities||b.getCities().success(function(b){a.fatHome.cities=b,a.getLocalities(a.city)}).error(function(){}),a.getLocalities=function(c){b.getLocalities(c).success(function(b){a.fatHome.localities=b}).error(function(){})},d.getPropertyDetails({id:c.propertyId}).success(function(b){a.property=b}).error(function(){})}]).service("PropertyDetailsService",["$http","servicesBaseUrl",function(a,b){this.getPropertyDetails=function(c){return a.get(b+"/properties/"+c.id)}}]);
"use strict";angular.module("propertyResults",[]).controller("PropertyResultsCtrl",["$scope","$routeParams","PropertyResultsService","FatHomeUtil",function(a,b,c,d){a.city=b.city,a.locality=b.locality,a.sortOptions=d.propertySortOptions();var e=function(){var a={zoom:8,center:new google.maps.LatLng(17.4833,78.4167),mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map"),a)};e();var f={city:b.city,locality:b.locality};c.getProperties(f).success(function(b){a.propertyResults=b}).error(function(){})}]).service("PropertyResultsService",["$http",function(a){var b="data/propertyresults.json";this.getProperties=function(c){return a.get(b,c)}}]).filter("filterPropertiesResults",[function(){return function(a,b){if(angular.isUndefined(a)||angular.isUndefined(b))return a;for(var c,d=[],e=0;e<a.length;e++)c=a[e],b.propertType&&b.propertType!==c.propertySubType||b.beds&&b.beds!==c.bedRooms||b.minPrice&&Number(b.minPrice)>Number(c.price)||b.maxPrice&&Number(b.maxPrice)<Number(c.price)||b.purpose&&b.purpose!==c.purpose||b.minSft&&Number(b.minSft)>Number(c.size)||b.maxSft&&Number(b.maxSft)<Number(c.size)||d.push(c);return d}}]).filter("sortPropertyResults",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){d.push(a)}),d.sort(function(a,c){var d=a[b],e=c[b];return d>e?1:-1}),c&&d.reverse(),d}});
"use strict";angular.module("propertyResults",[]).controller("PropertyResultsCtrl",["$scope","$routeParams","PropertyResultsService","FatHomeUtil","LocationService","$location",function(a,b,c,d,e,f){a.user.city=a.city=a.newCity=b.city,a.user.locality=a.locality=a.newLocality=b.locality,a.properties=[],a.sortOptions=d.propertySortOptions(),a.bedRoomsDropDownValues=d.bedRoomsDropDownValues(),a.propertyTypes=d.propertyTypes(),a.propertySubTypeMapper=d.propertySubTypeMapper(),a.predicate={},a.fatHome.cities||e.getCities().success(function(b){a.fatHome.cities=b,a.getLocalities(a.city)}).error(function(){}),a.$on("$routeUpdate",function(){alert("$routeUpdate")}),a.openChangeLocationModal=function(){a.newCity=a.city,a.newLocality=a.locality,a.form1.submitted=!1,a.showChangeLocationModal=!0},a.showProperties=function(b,c){a.form1.submitted=!0,a.form1.$valid&&(a.showChangeLocationModal=!1,f.path("/propertyresults/"+b+"/"+c))},a.getLocalities=function(b){return b?void e.getLocalities(b).success(function(b){a.localities=b,a.fatHome.localities=b,a.currentLocationDetails=d.getLocationDetails(b,a.locality)}).error(function(){}):void(a.localities=[])},a.fatHome.localities&&(a.currentLocationDetails=d.getLocationDetails(a.fatHome.localities,a.locality));var g={city:b.city,locality:b.locality};c.getProperties(g).success(function(b){a.properties=b,a.predicate.dataField="createdDate",a.predicate.reverseOrder=!0}).error(function(){}),a.getPropertyDetails=function(b){c.getPropertyDetails(b).success(function(b){a.showPage="propertyDetails",a.property=b}).error(function(){})},a.showPropertyResults=function(){a.showPage="propertyResults"}}]).service("PropertyResultsService",["$http","servicesBaseUrl",function(a,b){this.getProperties=function(c){return a.get(b+"/properties/"+c.city+"/"+c.locality)},this.getPropertyDetails=function(c){return a.get(b+"/properties/"+c)}}]).filter("filterPropertiesResults",[function(){return function(a,b){if(angular.isUndefined(a)||angular.isUndefined(b))return a;for(var c,d=[],e=0;e<a.length;e++)c=a[e],b.propertType&&b.propertType!==c.propertySubType||b.beds&&Number(b.beds)!==Number(c.bedRooms)||b.minPrice&&Number(b.minPrice)>Number(c.price)||b.maxPrice&&Number(b.maxPrice)<Number(c.price)||b.purpose&&"Rent"!==c.mode||b.hasOwnProperty("purpose")&&!b.purpose&&"Sell"!==c.mode||b.minSft&&Number(b.minSft)>Number(c.size)||b.maxSft&&Number(b.maxSft)<Number(c.size)||d.push(c);return d}}]).filter("sortPropertyResults",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){d.push(a)}),d.sort(function(a,c){var d=a[b],e=c[b];return d>e?1:-1}),c&&d.reverse(),d}}).filter("currencyFormatter",function(){return function(a){if(!a)return"";var b=a.toString(),c=b.indexOf(".");c>-1&&(b=str.substring(0,c));var d=b.substring(b.length-3),e=b.substring(0,b.length-3);return""!=e&&(d=","+d),e.replace(/\B(?=(\d{2})+(?!\d))/g,",")+d}}).directive("propertyResults",function(){return{replace:!0,restrict:"EA",templateUrl:"modules/propertyresults/html/property-results-partial.html"}}).directive("propertyDetails",function(){return{replace:!0,restrict:"EA",templateUrl:"modules/propertydetails/html/property-details.html"}});
"use strict";angular.module("registerProperty",[]).controller("RegisterPropertyCtrl",["$scope","LocationService","FatHomeUtil","$routeParams","RegisterPropertyService","$rootScope",function(a,b,c,d,e,f){a.user.city=a.city=d.city,a.user.locality=a.locality=d.locality,a.registerPropertySuccess=!1,a.property={user:{}},a.property.user.city=a.city,a.property.user.locality=a.locality,a.unitOptions=c.unitOptions(),a.hours=c.hoursDropDownValues(),a.ageOfPropertyOptions=c.ageOfPropertyOptions(),a.noOfUnits=c.noOfUnitsDropDownValues(),a.balconiesDropDownValues=c.balconiesDropDownValues(),a.bedRoomsDropDownValues=c.bedRoomsDropDownValues(),a.bathRoomsDropDownValues=c.bathRoomsDropDownValues(),a.flooringDropDownValues=c.flooringDropDownValues(),a.propertyTypes=c.propertyTypes(),a.propertySubTypeMapper=c.propertySubTypeMapper(),a.disableSubmitbtn=!1,a.city=a.newCity=d.city,a.locality=a.newLocality=d.locality,a.fatHome.cities||b.getCities().success(function(b){a.fatHome.cities=b,a.getLocalities(a.city)}).error(function(){}),a.getLocalities=function(c){b.getLocalities(c).success(function(b){a.fatHome.localities=b,a.populateCurrentLocationDetails()}).error(function(){})},a.populateCurrentLocationDetails=function(){a.currentLocationDetails&&a.currentLocationDetails.city===a.property.user.city&&a.currentLocationDetails.locality===a.property.user.locality||(a.currentLocationDetails=c.getLocationDetails(a.fatHome.localities,a.property.user.locality))},a.fatHome.localities&&a.populateCurrentLocationDetails(),a.updatePropertyStatus=function(){"Sell"===a.property.details.mode&&(a.property.details.propertyStatus="Resale")},a.updateCoverPhotoIndex=function(b){angular.forEach(a.propertyImages,function(a,c){a.coverPhoto=c===b?!0:!1})},a.$watch("propertyImages",function(){if(a.propertyImages){var b;angular.forEach(a.propertyImages,function(a){a.coverPhoto&&(b=!0)}),!b&&a.propertyImages.length>0&&a.updateCoverPhotoIndex(0)}},!0),a.selectFirstAsCoverPhoto=function(){angular.forEach(a.propertyImages,function(a,b){a.coverPhoto=b===index?!0:!1})},a.registerProperty=function(){a.disableSubmitbtn=!0;var b={property:g(a.property),images:{userImage:a.userImage,propertyImages:a.propertyImages}};console.log(angular.toJson(b)),f.$broadcast("SHOW_PROGRESS_BAR"),e.registerProperty(angular.toJson(b)).success(function(){a.registerPropertySuccess=!0,f.$broadcast("HIDE_PROGRESS_BAR")}).error(function(){a.disableSubmitbtn=!0,f.$broadcast("HIDE_PROGRESS_BAR")})};var g=function(a){return a.createdDate=new Date,a.details.area.builtUp&&(a.details.area.builtUp.builtUpInSqft=c.getSqftMutiplier(a.details.area.builtUp.units)*Number(a.details.area.builtUp.builtUp)),a.details.area.plotOrLand&&(a.details.area.plotOrLand.plotOrLandInSqft=c.getSqftMutiplier(a.details.area.plotOrLand.units)*Number(a.details.area.plotOrLand.plotOrLand)),a.details.area.carpet&&(a.details.area.carpet.carpetInSqft=c.getSqftMutiplier(a.details.area.carpet.units)*Number(a.details.area.carpet.carpet)),a.details.title=c.convertToCamelCase(a.details.title),a};a.validateFloors=function(b,c){a.form2.floorNumber.$error.invalidFloorNumber=!1,b&&c&&(form2.totalFloors.$valid=!0,form2.totalFloors.$valid&&Number(b)<Number(c)&&(a.form2.floorNumber.$error.invalidFloorNumber=!0,form2.totalFloors.$valid=!1))}}]).service("RegisterPropertyService",["$http","servicesBaseUrl",function(a,b){this.registerProperty=function(c){return a.post(b+"/properties",c)}}]).directive("scroll",function(){return{restrict:"EA",link:function(a){a.$watch("showForm1",function(a){a&&$(window).scrollTop(0)}),a.$watch("showForm2",function(a){a&&$(window).scrollTop(0)},!0),a.$watch("showForm3",function(a){a&&$(window).scrollTop(0)},!0)}}}).directive("datePicker",function(){return{restrict:"EA",require:"ngModel",link:function(a,b,c,d){$(function(){b.datepicker({dateFormat:"mm-dd-yy",onSelect:function(){d.$setViewValue(b.datepicker("getDate")),a.$apply()},onClose:function(b){b||d.$setViewValue(null),a.$apply()},minDate:new Date})})}}}).directive("pinProperty",function(){return{restrict:"EA",scope:{location:"=",property:"=",resizeMap:"="},link:function(a,b){var c,d=function(){if(a.location){var c={zoom:15,center:new google.maps.LatLng(a.location.lat,a.location.long),mapTypeId:google.maps.MapTypeId.ROADMAP},d=new google.maps.Map(b[0],c),e=new google.maps.Marker({position:d.getCenter(),map:d,animation:google.maps.Animation.BOUNCE,draggable:!0}),f=new google.maps.InfoWindow({content:""});f.open(d,e),google.maps.event.addListener(e,"dragend",function(b){a.property.location||(a.property.location={}),f.setContent("Latitude : "+b.latLng.lat()+" Longittude : "+b.latLng.lng()),a.property.location.lat=b.latLng.lat(),a.property.location.lng=b.latLng.lng()})}};a.$watch(function(){a.location&&c!==a.location&&a.resizeMap&&(c=a.location,d())})}}});